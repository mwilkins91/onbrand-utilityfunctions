{"version":3,"sources":["webpack://onbrandUtilityFunctions/webpack/universalModuleDefinition","webpack://onbrandUtilityFunctions/webpack/bootstrap","webpack://onbrandUtilityFunctions/./modules/banner.js","webpack://onbrandUtilityFunctions/./index.js"],"names":["root","factory","exports","module","define","amd","onbrandUtilityFunctions","window","e","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","default","object","property","prototype","hasOwnProperty","p","s","t","Banner","userOptions","this","options","assign","forPage","forPages","imageUrl","recoEnginePositioning","targetSel","reposition","target","$reco","$","calculatedPosition","offset","top","height","scrollTop","desiredPosition","css","err","console","warn","error","bind","Hubs","Events","on","doIfTag","filterBy","yesTagFn","arguments","length","noTagFn","not","hasClass","each","el","allTagsString","dataset","tags","hasTag","split","forEach","tag","toLowerCase","addClass","fixShareWidgetImproved","append","prepend","clone","insertAfter","$shareMain","update","remove","document","querySelectorAll","link","addEventListener","preventDefault","open","href","blockCtaFix","$blockCta","$main","ctaHalfHeight","bottom","middleScreen","middleScreenBottom","position","transform","margin","fadeOutItem","footerHeight","sweetSpot","body","scrollHeight","fadeOut","fadeIn","descriptionSlideUp","devMode","devOptions","log","internalLink","changePage","relativeLinks","url","matchThis","RegExp","testThis","attr","test","charAt","newHref","replace","production","shortHubUrl","Config","hubBaseUrl","setTimeout","removeClasses","children","doIfTagRegex","theTag","noQueryStringSafeguard","location","host","getStreamClass","streamClass","currentClass","helpfulClasses","typeArray","detectAndAddClass","type","removeClass","$class","includes","push"],"mappings":"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","file":"onbrandUtilityFunctions.bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"onbrandUtilityFunctions\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"onbrandUtilityFunctions\"] = factory();\n\telse\n\t\troot[\"onbrandUtilityFunctions\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","class Banner {\n  constructor(userOptions) {\n    const defaultOptions = {\n      forPage: 'hub-page',\n      forPages: false,\n      imageUrl: '#',\n    };\n    this.options = Object.assign({}, defaultOptions, userOptions);\n  }\n}\n\nmodule.exports = Banner;\n","exports.Banner = require('./modules/banner');\n\n/**\n * Loop over each tile, and if the tag specified (1st param) is\n * present, execute yesTagFn (2nd param) if the tag is not present,\n * execute noTagFn (3rd param). In both callbacks,\n * **this** reffers to the tile currently being checked\n *\n * @param {string} filterBy --> The tag to look for\n * @param {function} [yesTagFn=function() {}] --> The function to run if a tile has the desired tag.\n * @param {function} [noTagFn=function() {}] --> The function to run if a tile\n *   does NOT have the desired tag.\n * @param {string} OPTIONAL: A css class to ignore, and to add after the tile has been processed.\n * @returns {boolean} --> returns true if the front end tags are enabled, otherwise returns false and logs an error.\n */\nexports.doIfTag = function (\n  filterBy,\n  yesTagFn = function () {},\n  noTagFn = function () {},\n  not = ''\n) {\n  if ($('body').hasClass('include_fe_item_tags')) {\n    $('.tile')\n      .not(not)\n      .each(function (i, el) {\n        // Get the tags for this tile.\n        const allTagsString = el.dataset.tags;\n\n        // assume it doesn't have the tag we want\n        let hasTag = false;\n\n        // If there is any tags to even check...\n        if (allTagsString) {\n          // split the tags into an array\n          const allTagsArray = allTagsString.split(',');\n\n          // loop over the array\n          allTagsArray.forEach((tag) => {\n            // if the tag matches what we're looking for, change hasTag to true\n            if (tag.toLowerCase() === filterBy.toLowerCase()) {\n              hasTag = true;\n            }\n          });\n        }\n        // Do this if the tile has the tag\n        if (hasTag) {\n          yesTagFn.call(this);\n          // Do this if the tile doesn't...\n          $(this).addClass(not);\n          return true;\n        }\n        noTagFn.call(this);\n        $(this).addClass(not);\n        return true;\n      });\n  } else {\n    console.error('-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-');\n    console.error('  Onbrander: You called doIfTag, but front end tags are NOT enabled !');\n    console.error('-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-');\n    return false;\n  }\n};\n\n/**\n * Take the hub share window, rip it out, and make our own.\n * On page change, replace our new share window with the appropriate one\n * for that page. Applies event listeners for load and page change,\n * simply call near the begining of your code.\n *\n * @returns {function} --> The function that updates on page change.\n */\nexports.fixShareWidgetImproved = function () {\n  $('head').append(`\n  <style id=\"shareWidgetFix\">\n    .relativeDiv {\n      position: relative;\n      float: right;\n    }\n\n    .relativeDiv.relativeDiv--search {\n      float: left;\n    }\n\n    .relativeDiv--share:hover .share-hub {\n      display: block;\n    }\n\n    .share-hub,\n    .share-item {\n      margin: auto;\n    }\n\n    .search-drop-down {\n      position: absolute;\n    }\n\n    @media all and (min-width: 860px) {\n      .share-hub,\n      .share-item {\n        right: auto;\n        position: absolute;\n        left: -450% !important;\n        top: 51px !important;\n      }\n      .search-drop-down {\n        right: 0;\n        position: absolute;\n        left: -4% !important;\n        top: 55px !important;\n      }\n    }\n\n    @media all and (max-width: 860px) {\n      .share-hub,\n      .share-item {\n        right: auto;\n        position: absolute;\n        left: -576% !important;\n        top: 45px !important;\n      }\n    }\n\n    @media all and (max-width: 720px) {\n      .share-hub,\n      .share-item {\n        right: auto;\n        position: absolute;\n        left: -465% !important;\n        top: 45px !important;\n      }\n    }\n  </style>`);\n  // rip out share window, put inside of relative div (in the same place)\n  // create div to house elements\n  $('.right-side-btns').prepend('<div class=\"relativeDiv relativeDiv--share\"><div class=\"insertFlag--share\"></div></div>');\n  // rip share-main and place after the flag div\n  $('#share-main-hub')\n    .clone()\n    .insertAfter('.insertFlag--share');\n  $('.share-toggle').insertAfter('.insertFlag--share');\n\n  // do the same to search box\n  $('.right-side-btns').prepend('<div class=\"relativeDiv relativeDiv--search\"><div class=\"insertFlag--search\"></div></div>');\n  $('.search-drop-down').insertAfter('.insertFlag--search');\n  $('.search-container').insertAfter('.insertFlag--search');\n  // This function will update the share widget for different pages\n  const $shareMain = $('#share-main-hub');\n  const update = function () {\n    if ($('.meta-inner .share-container').length) {\n      $('.right-side-btns .share-hub').remove();\n      $('.right-side-btns .share-container').remove();\n      $('.meta-inner .share-container').insertAfter('.insertFlag--share');\n    } else if (\n      $('.share-item.type-collection').length &&\n      !$('body').hasClass('hub-page')\n    ) {\n      $('.right-side-btns .share-hub').remove();\n      $('.right-side-btns .share-container').remove();\n      $('#hubs-container .page-aligner>.share-container').insertAfter('.insertFlag--share');\n    } else {\n      $('.right-side-btns .share-hub').remove();\n      $('.right-side-btns .share-container').remove();\n      if ($('#share-main-hub').length) {\n        $('#share-main-hub')\n          .clone()\n          .insertAfter('.insertFlag--share');\n      } else {\n        $shareMain.clone().insertAfter('.insertFlag--share');\n      }\n    }\n  };\n  // Make sure social still opens in popup\n  const links = document.querySelectorAll('#share-main-hub li a');\n  links.forEach(link =>\n    link.addEventListener('click', function (e) {\n      e.preventDefault();\n      window.open(\n        this.href,\n        'windowName',\n        'width=540, height=433, left=24, top=24, scrollbars, resizable'\n      );\n    }));\n  Hubs.Events.on('load', update);\n  Hubs.Events.on('pageChange', update);\n  return update;\n};\n\n/**\n * This function is to be called on scroll, and will keep the block CTAs\n * within the bounds of the article they are supposed to be blocking\n * (preventing them from overlapping the injected header and footer).\n */\nexports.blockCtaFix = function () {\n  const $blockCta = $('.block-cta:not(.embed-cta)');\n\n  if ($blockCta.length && !$('.level-three .block-cta').length) {\n    const $main = $('.main');\n    const ctaHalfHeight = $blockCta.height() / 2;\n    const { top } = $main.offset();\n    const bottom = $main.offset().top + $main.height();\n    const middleScreen = $(window).scrollTop() + ($(window).height() / 2);\n\n    const middleScreenTop = middleScreen - ctaHalfHeight;\n    const middleScreenBottom = middleScreen + ctaHalfHeight;\n    // console.log(middleScreenTop)\n    if (middleScreenTop < top) {\n      $blockCta.css({\n        position: 'absolute',\n        top,\n        bottom: '',\n        transform: 'translate(-50%, -50%)',\n        margin: 0,\n      });\n    } else if (middleScreenBottom > bottom) {\n      $blockCta.css({\n        position: 'absolute',\n        top: bottom - $blockCta.height() - ctaHalfHeight,\n        transform: 'translate(-50%, -50%)',\n        margin: 0,\n      });\n    } else {\n      $blockCta.css({\n        position: 'fixed',\n        top: '50vh',\n        bottom: '',\n        transform: 'translate(-50%, -50%)',\n        margin: 0,\n      });\n    }\n  }\n};\n\n/**\n * When called on scroll, this function will fade out\n * the next-item-flyout before it can overlap with the injected-footer\n */\nexports.fadeOutItem = () => {\n  if ($('body').hasClass('single-page')) {\n    const footerHeight = $('footer').height();\n    const pageHeight = document.body.scrollHeight - $(window).height();\n    const sweetSpot = pageHeight - (footerHeight + $(window).height());\n    if ($(window).scrollTop() > sweetSpot) {\n      $('.item-next-prev').fadeOut('fast');\n    } else {\n      $('.item-next-prev').fadeIn('fast');\n    }\n  }\n};\n\n/**\n * Simply adds the css required to have tile descriptions slide up on hover\n */\nexports.descriptionSlideUp = function () {\n  $('head').append(`<style id=\"descriptionsSlideUp\">\n  /*-- Tile Description Pop-up Hover --*/\n  #collection-items .tile .description {\n    -webkit-transition: all 0.4s ease-out;\n    transition: all 0.4s ease-out;\n  }\n  #collection-items .tile .description .long-h3 {\n    display: block !important;\n  }\n  \n  #collection-items .tile:hover .description {\n    height: 100%;\n    -webkit-transition: all 0.3s ease-out;\n    transition: all 0.3s ease-out;\n  }\n  \n  #collection-items .tile .share-single {\n    display: none;\n  }\n  </style>`);\n};\n\nexports.devMode = function (devOptions) {\n  console.log(' ');\n  console.log(' ');\n  console.warn('-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=');\n  console.warn('   Hey Onbrander, Just letting you know that we\\'re in dev mode!');\n  console.warn('   You have access to the following functions:', exports);\n  console.warn('   More info available here: http://cihost.uberflip.com/docs/');\n  console.warn('-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=');\n  console.log(' ');\n  console.log(' ');\n\n  /**\n   *  Utility Functions\n   */\n  const internalLink = function (e) {\n    e.preventDefault();\n    Hubs.changePage(e.target.href);\n  };\n\n  /**\n   *\n   * @param {string} url - the url to replace with a relative path\n   */\n  const relativeLinks = function (url) {\n    // We need relative links for local dev, so we regex for the url as the href\n    const matchThis = new RegExp(\n      `^((http[s]?|ftp):/)?/?([^:/s]+)?(${url})`,\n      'gi'\n    );\n    $('a')\n      .not('.onBrand--LocalDevLink')\n      .each(function () {\n        const testThis = $(this).attr('href');\n        if (\n          matchThis.test(testThis) ||\n          (testThis && testThis.charAt(0) === '/')\n        ) {\n          let newHref = testThis.replace(matchThis, '');\n          if (!(newHref[0] === '/')) {\n            newHref = `/${newHref}?onbrand`;\n          } else {\n            newHref += '?onbrand';\n          }\n          $(this).attr('href', newHref);\n          $(this).attr('target', '');\n          // add event listener to do internal page change instead of full reload\n          $(this).on('click', internalLink);\n          $(this).addClass('onBrand--LocalDevLink');\n        }\n      });\n  };\n  /**\n   *  Local Development Events\n   */\n\n  if (!production) {\n    // run right away to catch any early clickers out there...\n    relativeLinks(devOptions.shortHubUrl);\n    Hubs.Config.hubBaseUrl = 'http://localhost:3000/';\n\n    // run on load to catch any links added via scripts or anything\n    Hubs.Events.on('load', () => {\n      relativeLinks(devOptions.shortHubUrl);\n      Hubs.Config.hubBaseUrl = 'http://localhost:3000/';\n    });\n    // run on page change to get links on different pages\n    Hubs.Events.on('pageChange', () => {\n      relativeLinks(devOptions.shortHubUrl);\n      Hubs.Config.hubBaseUrl = 'http://localhost:3000/';\n    });\n    // get all the links on extra tiles added in\n    Hubs.Events.on('itemsLoaded', () => {\n      relativeLinks(devOptions.shortHubUrl);\n    });\n    $(window).on('search', () => {\n      setTimeout(() => {\n        relativeLinks(devOptions.shortHubUrl);\n      }, 500);\n    });\n  }\n};\n\n/**\n * Recursivley remove all the standard classes from our topnav clone,\n * add some handly classes in the prcoess. Called as the callback to\n * a jQuery .each(). EX $(parent).children().each(removeClasses)\n *\n * @param {index} i\n * @param {element} el\n */\nexports.removeClasses = function removeClasses(i, el) {\n  $(el)\n    .attr('class', '')\n    .children()\n    .each(removeClasses);\n};\n\n/**\n *\n * @param {Regular Expression} What tag you're looking for\n * @param {function} OPTIONAL: A function to execute if the tile has\n *   the tag, THIS = the tile inside the function.\n * @param {function} OPTIONAL: A function to execute if the tile\n *   DOES NOT have the tag, THIS = the tile inside the function.\n * @param {string} OPTIONAL: A css class to ignore, and to add after the tile has been processed.\n */\nexports.doIfTagRegex = function doIfTagRegex(\n  filterBy,\n  yesTagFn = function () {},\n  noTagFn = function () {},\n  not = ''\n) {\n  if (!(filterBy instanceof RegExp)) {\n    console.error(`${filterBy} is not a valid regular expression! Please use new RegExp() to generate one!`);\n    return false;\n  } else if ($('body').hasClass('include_fe_item_tags')) {\n    $('.tile')\n      .not(not)\n      .each(function (i, el) {\n        // Get the tags for this tile.\n        const allTagsString = el.dataset.tags;\n\n        // assume it doesn't have the tag we want\n        let hasTag = false;\n        let theTag;\n        // If there is any tags to even check...\n        if (allTagsString) {\n          // split the tags into an array\n          const allTagsArray = allTagsString.split(',');\n\n          // loop over the array\n          allTagsArray.forEach((tag) => {\n            // if the tag matches what we're looking for, change hasTag to true\n            if (filterBy.test(tag)) {\n              hasTag = true;\n              theTag = tag;\n            }\n          });\n        }\n        // Do this if the tile has the tag\n        if (hasTag) {\n          yesTagFn.call(this, theTag);\n          // Do this if the tile doesn't...\n          $(this).addClass(not);\n          return true;\n        }\n        noTagFn.call(this);\n        $(this).addClass(not);\n        return true;\n      });\n  } else {\n    console.error('-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-');\n    console.error('  Onbrander: You called doIfTag, but front end tags are NOT enabled !');\n    console.error('-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-');\n    return false;\n  }\n};\n\nexports.noQueryStringSafeguard = function () {\n  if (\n    /localhost:3000/gi.test(window.location.host) &&\n    !(\n      /\\?onbrand/gi.test(window.location.href) ||\n      /&onbrand/gi.test(window.location.href)\n    )\n  ) {\n    console.error('It looks like you are in dev mode, but you\\'re missing the onbrand query string.');\n  }\n};\n\n/**\n * Returns the stream class for that page.\n *\n * @returns {String} 'stream-xxxxx' or false, if the page has no stream.\n */\nexports.getStreamClass = function () {\n  const classes = $('body').attr('class');\n  const classArray = classes.split(' ');\n  let streamClass;\n  classArray.forEach((currentClass) => {\n    if (/stream-/gi.test(currentClass)) streamClass = currentClass;\n  });\n  return streamClass || false;\n};\n\n/**\n * Adds helpful body classes based on content type to make styling easier.\n */\nexports.helpfulClasses = function () {\n  /* An array to keep track of what content types are used\n   * (ensures we are dynamic, no hardcoded types)\n   */\n  const typeArray = [];\n\n  /**\n   * Removes all known type classes from the body, then adds whichever\n   * is relevent to that page. Checks to see if that class is known, and if\n   * not, adds it to the array.\n   */\n  function detectAndAddClass() {\n    typeArray.forEach(type => $('body').removeClass(type));\n\n    const $class = $('#page-type-identifier').attr('data-item-type');\n    if ($class) {\n      $('body').addClass($class);\n      if (!typeArray.includes($class)) {\n        typeArray.push($class);\n      }\n    }\n\n    if (!$('body').hasClass('webpackBuild')) {\n      $('body').addClass('webpackBuild');\n    }\n  }\n\n  // Event listeners\n  Hubs.Events.on('load', detectAndAddClass);\n  Hubs.Events.on('pageChange', detectAndAddClass);\n};\n\n/**\n * Locks the reco engine panel to the bottom of the provided target,\n * but moves it to the top of the screen when the target is out of view.\n *\n * @param {Selector} target\n */\nexport function recoEnginePositioning(targetSel) {\n  const reposition = function (target) {\n    try {\n      const $reco = $('.reco-panel');\n      const bottomOfTarget = $(target).offset().top + $(target).height();\n      const calculatedPosition = bottomOfTarget - $(window).scrollTop();\n      const desiredPosition = calculatedPosition > 0 ? calculatedPosition : 0;\n      $reco.css('top', desiredPosition);\n    } catch (err) {\n      console.warn('recoEnginePositioning() has failed - the error thrown was:');\n      console.error(err);\n      console.warn(`The target used was:${target}`);\n    }\n  }.bind($('.reco-panel'), targetSel);\n\n  Hubs.Events.on('scroll', reposition);\n  Hubs.Events.on('load', reposition);\n  Hubs.Events.on('pageChange', reposition);\n  Hubs.Events.on('resize', reposition);\n}\n"],"sourceRoot":""}