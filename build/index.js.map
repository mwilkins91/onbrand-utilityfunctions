{"version":3,"sources":["../index.js"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["exports.Banner = require('./modules/banner');\n\n/**\n * Loop over each tile, and if the tag specified (1st param) is\n * present, execute yesTagFn (2nd param) if the tag is not present,\n * execute noTagFn (3rd param). In both callbacks,\n * **this** reffers to the tile currently being checked\n *\n * @param {string} filterBy --> The tag to look for\n * @param {function} [yesTagFn=function() {}] --> The function to run if a tile has the desired tag.\n * @param {function} [noTagFn=function() {}] --> The function to run if a tile\n *   does NOT have the desired tag.\n * @param {string} OPTIONAL: A css class to ignore, and to add after the tile has been processed.\n * @returns {boolean} --> returns true if the front end tags are enabled, otherwise returns false and logs an error.\n */\nexports.doIfTag = function (\n  filterBy,\n  yesTagFn = function () {},\n  noTagFn = function () {},\n  not = ''\n) {\n  if ($('body').hasClass('include_fe_item_tags')) {\n    $('.tile')\n      .not(not)\n      .each(function (i, el) {\n        // Get the tags for this tile.\n        const allTagsString = el.dataset.tags;\n\n        // assume it doesn't have the tag we want\n        let hasTag = false;\n\n        // If there is any tags to even check...\n        if (allTagsString) {\n          // split the tags into an array\n          const allTagsArray = allTagsString.split(',');\n\n          // loop over the array\n          allTagsArray.forEach((tag) => {\n            // if the tag matches what we're looking for, change hasTag to true\n            if (tag.toLowerCase() === filterBy.toLowerCase()) {\n              hasTag = true;\n            }\n          });\n        }\n        // Do this if the tile has the tag\n        if (hasTag) {\n          yesTagFn.call(this);\n          // Do this if the tile doesn't...\n          $(this).addClass(not);\n          return true;\n        }\n        noTagFn.call(this);\n        $(this).addClass(not);\n        return true;\n      });\n  } else {\n    console.error('-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-');\n    console.error('  Onbrander: You called doIfTag, but front end tags are NOT enabled !');\n    console.error('-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-');\n    return false;\n  }\n};\n\n/**\n * Take the hub share window, rip it out, and make our own.\n * On page change, replace our new share window with the appropriate one\n * for that page. Applies event listeners for load and page change,\n * simply call near the begining of your code.\n *\n * @returns {function} --> The function that updates on page change.\n */\nexports.fixShareWidgetImproved = function () {\n  $('head').append(`\n  <style id=\"shareWidgetFix\">\n    .relativeDiv {\n      position: relative;\n      float: right;\n    }\n\n    .relativeDiv.relativeDiv--search {\n      float: left;\n    }\n\n    .relativeDiv--share:hover .share-hub {\n      display: block;\n    }\n\n    .share-hub,\n    .share-item {\n      margin: auto;\n    }\n\n    .search-drop-down {\n      position: absolute;\n    }\n\n    @media all and (min-width: 860px) {\n      .share-hub,\n      .share-item {\n        right: auto;\n        position: absolute;\n        left: -450% !important;\n        top: 51px !important;\n      }\n      .search-drop-down {\n        right: 0;\n        position: absolute;\n        left: -4% !important;\n        top: 55px !important;\n      }\n    }\n\n    @media all and (max-width: 860px) {\n      .share-hub,\n      .share-item {\n        right: auto;\n        position: absolute;\n        left: -576% !important;\n        top: 45px !important;\n      }\n    }\n\n    @media all and (max-width: 720px) {\n      .share-hub,\n      .share-item {\n        right: auto;\n        position: absolute;\n        left: -465% !important;\n        top: 45px !important;\n      }\n    }\n  </style>`);\n  // rip out share window, put inside of relative div (in the same place)\n  // create div to house elements\n  $('.right-side-btns').prepend('<div class=\"relativeDiv relativeDiv--share\"><div class=\"insertFlag--share\"></div></div>');\n  // rip share-main and place after the flag div\n  $('#share-main-hub')\n    .clone()\n    .insertAfter('.insertFlag--share');\n  $('.share-toggle').insertAfter('.insertFlag--share');\n\n  // do the same to search box\n  $('.right-side-btns').prepend('<div class=\"relativeDiv relativeDiv--search\"><div class=\"insertFlag--search\"></div></div>');\n  $('.search-drop-down').insertAfter('.insertFlag--search');\n  $('.search-container').insertAfter('.insertFlag--search');\n  // This function will update the share widget for different pages\n  const $shareMain = $('#share-main-hub');\n  const update = function () {\n    if ($('.meta-inner .share-container').length) {\n      $('.right-side-btns .share-hub').remove();\n      $('.right-side-btns .share-container').remove();\n      $('.meta-inner .share-container').insertAfter('.insertFlag--share');\n    } else if (\n      $('.share-item.type-collection').length &&\n      !$('body').hasClass('hub-page')\n    ) {\n      $('.right-side-btns .share-hub').remove();\n      $('.right-side-btns .share-container').remove();\n      $('#hubs-container .page-aligner>.share-container').insertAfter('.insertFlag--share');\n    } else {\n      $('.right-side-btns .share-hub').remove();\n      $('.right-side-btns .share-container').remove();\n      if ($('#share-main-hub').length) {\n        $('#share-main-hub')\n          .clone()\n          .insertAfter('.insertFlag--share');\n      } else {\n        $shareMain.clone().insertAfter('.insertFlag--share');\n      }\n    }\n  };\n  // Make sure social still opens in popup\n  const links = document.querySelectorAll('#share-main-hub li a');\n  links.forEach(link =>\n    link.addEventListener('click', function (e) {\n      e.preventDefault();\n      window.open(\n        this.href,\n        'windowName',\n        'width=540, height=433, left=24, top=24, scrollbars, resizable'\n      );\n    }));\n  Hubs.Events.on('load', update);\n  Hubs.Events.on('pageChange', update);\n  return update;\n};\n\n/**\n * This function is to be called on scroll, and will keep the block CTAs\n * within the bounds of the article they are supposed to be blocking\n * (preventing them from overlapping the injected header and footer).\n */\nexports.blockCtaFix = function () {\n  const $blockCta = $('.block-cta:not(.embed-cta)');\n\n  if ($blockCta.length && !$('.level-three .block-cta').length) {\n    const $main = $('.main');\n    const ctaHalfHeight = $blockCta.height() / 2;\n    const { top } = $main.offset();\n    const bottom = $main.offset().top + $main.height();\n    const middleScreen = $(window).scrollTop() + ($(window).height() / 2);\n\n    const middleScreenTop = middleScreen - ctaHalfHeight;\n    const middleScreenBottom = middleScreen + ctaHalfHeight;\n    // console.log(middleScreenTop)\n    if (middleScreenTop < top) {\n      $blockCta.css({\n        position: 'absolute',\n        top,\n        bottom: '',\n        transform: 'translate(-50%, -50%)',\n        margin: 0,\n      });\n    } else if (middleScreenBottom > bottom) {\n      $blockCta.css({\n        position: 'absolute',\n        top: bottom - $blockCta.height() - ctaHalfHeight,\n        transform: 'translate(-50%, -50%)',\n        margin: 0,\n      });\n    } else {\n      $blockCta.css({\n        position: 'fixed',\n        top: '50vh',\n        bottom: '',\n        transform: 'translate(-50%, -50%)',\n        margin: 0,\n      });\n    }\n  }\n};\n\n/**\n * When called on scroll, this function will fade out\n * the next-item-flyout before it can overlap with the injected-footer\n */\nexports.fadeOutItem = () => {\n  if ($('body').hasClass('single-page')) {\n    const footerHeight = $('footer').height();\n    const pageHeight = document.body.scrollHeight - $(window).height();\n    const sweetSpot = pageHeight - (footerHeight + $(window).height());\n    if ($(window).scrollTop() > sweetSpot) {\n      $('.item-next-prev').fadeOut('fast');\n    } else {\n      $('.item-next-prev').fadeIn('fast');\n    }\n  }\n};\n\n/**\n * Simply adds the css required to have tile descriptions slide up on hover\n */\nexports.descriptionSlideUp = function () {\n  $('head').append(`<style id=\"descriptionsSlideUp\">\n  /*-- Tile Description Pop-up Hover --*/\n  #collection-items .tile .description {\n    -webkit-transition: all 0.4s ease-out;\n    transition: all 0.4s ease-out;\n  }\n  #collection-items .tile .description .long-h3 {\n    display: block !important;\n  }\n  \n  #collection-items .tile:hover .description {\n    height: 100%;\n    -webkit-transition: all 0.3s ease-out;\n    transition: all 0.3s ease-out;\n  }\n  \n  #collection-items .tile .share-single {\n    display: none;\n  }\n  </style>`);\n};\n\nexports.devMode = function (devOptions) {\n  console.log(' ');\n  console.log(' ');\n  console.warn('-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=');\n  console.warn('   Hey Onbrander, Just letting you know that we\\'re in dev mode!');\n  console.warn('   You have access to the following functions:', exports);\n  console.warn('   More info available here: http://cihost.uberflip.com/docs/');\n  console.warn('-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=');\n  console.log(' ');\n  console.log(' ');\n\n  /**\n   *  Utility Functions\n   */\n  const internalLink = function (e) {\n    e.preventDefault();\n    Hubs.changePage(e.target.href);\n  };\n\n  /**\n   *\n   * @param {string} url - the url to replace with a relative path\n   */\n  const relativeLinks = function (url) {\n    // We need relative links for local dev, so we regex for the url as the href\n    const matchThis = new RegExp(\n      `^((http[s]?|ftp):/)?/?([^:/s]+)?(${url})`,\n      'gi'\n    );\n    $('a')\n      .not('.onBrand--LocalDevLink')\n      .each(function () {\n        const testThis = $(this).attr('href');\n        if (\n          matchThis.test(testThis) ||\n          (testThis && testThis.charAt(0) === '/')\n        ) {\n          let newHref = testThis.replace(matchThis, '');\n          if (!(newHref[0] === '/')) {\n            newHref = `/${newHref}?onbrand`;\n          } else {\n            newHref += '?onbrand';\n          }\n          $(this).attr('href', newHref);\n          $(this).attr('target', '');\n          // add event listener to do internal page change instead of full reload\n          $(this).on('click', internalLink);\n          $(this).addClass('onBrand--LocalDevLink');\n        }\n      });\n  };\n  /**\n   *  Local Development Events\n   */\n\n  if (!production) {\n    // run right away to catch any early clickers out there...\n    relativeLinks(devOptions.shortHubUrl);\n    Hubs.Config.hubBaseUrl = 'http://localhost:3000/';\n\n    // run on load to catch any links added via scripts or anything\n    Hubs.Events.on('load', () => {\n      relativeLinks(devOptions.shortHubUrl);\n      Hubs.Config.hubBaseUrl = 'http://localhost:3000/';\n    });\n    // run on page change to get links on different pages\n    Hubs.Events.on('pageChange', () => {\n      relativeLinks(devOptions.shortHubUrl);\n      Hubs.Config.hubBaseUrl = 'http://localhost:3000/';\n    });\n    // get all the links on extra tiles added in\n    Hubs.Events.on('itemsLoaded', () => {\n      relativeLinks(devOptions.shortHubUrl);\n    });\n    $(window).on('search', () => {\n      setTimeout(() => {\n        relativeLinks(devOptions.shortHubUrl);\n      }, 500);\n    });\n  }\n};\n\n/**\n * Recursivley remove all the standard classes from our topnav clone,\n * add some handly classes in the prcoess. Called as the callback to\n * a jQuery .each(). EX $(parent).children().each(removeClasses)\n *\n * @param {index} i\n * @param {element} el\n */\nexports.removeClasses = function removeClasses(i, el) {\n  $(el)\n    .attr('class', '')\n    .children()\n    .each(removeClasses);\n};\n\n/**\n *\n * @param {Regular Expression} What tag you're looking for\n * @param {function} OPTIONAL: A function to execute if the tile has\n *   the tag, THIS = the tile inside the function.\n * @param {function} OPTIONAL: A function to execute if the tile\n *   DOES NOT have the tag, THIS = the tile inside the function.\n * @param {string} OPTIONAL: A css class to ignore, and to add after the tile has been processed.\n */\nexports.doIfTagRegex = function doIfTagRegex(\n  filterBy,\n  yesTagFn = function () {},\n  noTagFn = function () {},\n  not = ''\n) {\n  if (!(filterBy instanceof RegExp)) {\n    console.error(`${filterBy} is not a valid regular expression! Please use new RegExp() to generate one!`);\n    return false;\n  } else if ($('body').hasClass('include_fe_item_tags')) {\n    $('.tile')\n      .not(not)\n      .each(function (i, el) {\n        // Get the tags for this tile.\n        const allTagsString = el.dataset.tags;\n\n        // assume it doesn't have the tag we want\n        let hasTag = false;\n        let theTag;\n        // If there is any tags to even check...\n        if (allTagsString) {\n          // split the tags into an array\n          const allTagsArray = allTagsString.split(',');\n\n          // loop over the array\n          allTagsArray.forEach((tag) => {\n            // if the tag matches what we're looking for, change hasTag to true\n            if (filterBy.test(tag)) {\n              hasTag = true;\n              theTag = tag;\n            }\n          });\n        }\n        // Do this if the tile has the tag\n        if (hasTag) {\n          yesTagFn.call(this, theTag);\n          // Do this if the tile doesn't...\n          $(this).addClass(not);\n          return true;\n        }\n        noTagFn.call(this);\n        $(this).addClass(not);\n        return true;\n      });\n  } else {\n    console.error('-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-');\n    console.error('  Onbrander: You called doIfTag, but front end tags are NOT enabled !');\n    console.error('-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-');\n    return false;\n  }\n};\n\nexports.noQueryStringSafeguard = function () {\n  if (\n    /localhost:3000/gi.test(window.location.host) &&\n    !(\n      /\\?onbrand/gi.test(window.location.href) ||\n      /&onbrand/gi.test(window.location.href)\n    )\n  ) {\n    console.error('It looks like you are in dev mode, but you\\'re missing the onbrand query string.');\n  }\n};\n\n/**\n * Returns the stream class for that page.\n *\n * @returns {String} 'stream-xxxxx' or false, if the page has no stream.\n */\nexports.getStreamClass = function () {\n  const classes = $('body').attr('class');\n  const classArray = classes.split(' ');\n  let streamClass;\n  classArray.forEach((currentClass) => {\n    if (/stream-/gi.test(currentClass)) streamClass = currentClass;\n  });\n  return streamClass || false;\n};\n\n/**\n * Adds helpful body classes based on content type to make styling easier.\n */\nexports.helpfulClasses = function () {\n  /* An array to keep track of what content types are used\n   * (ensures we are dynamic, no hardcoded types)\n   */\n  const typeArray = [];\n\n  /**\n   * Removes all known type classes from the body, then adds whichever\n   * is relevent to that page. Checks to see if that class is known, and if\n   * not, adds it to the array.\n   */\n  function detectAndAddClass() {\n    typeArray.forEach(type => $('body').removeClass(type));\n\n    const $class = $('#page-type-identifier').attr('data-item-type');\n    if ($class) {\n      $('body').addClass($class);\n      if (!typeArray.includes($class)) {\n        typeArray.push($class);\n      }\n    }\n\n    if (!$('body').hasClass('webpackBuild')) {\n      $('body').addClass('webpackBuild');\n    }\n  }\n\n  // Event listeners\n  Hubs.Events.on('load', detectAndAddClass);\n  Hubs.Events.on('pageChange', detectAndAddClass);\n};\n\n/**\n * Locks the reco engine panel to the bottom of the provided target,\n * but moves it to the top of the screen when the target is out of view.\n *\n * @param {Selector} target\n */\nexport function recoEnginePositioning(targetSel) {\n  const reposition = function (target) {\n    try {\n      const $reco = $('.reco-panel');\n      const bottomOfTarget = $(target).offset().top + $(target).height();\n      const calculatedPosition = bottomOfTarget - $(window).scrollTop();\n      const desiredPosition = calculatedPosition > 0 ? calculatedPosition : 0;\n      $reco.css('top', desiredPosition);\n    } catch (err) {\n      console.warn('recoEnginePositioning() has failed - the error thrown was:');\n      console.error(err);\n      console.warn(`The target used was:${target}`);\n    }\n  }.bind($('.reco-panel'), targetSel);\n\n  Hubs.Events.on('scroll', reposition);\n  Hubs.Events.on('load', reposition);\n  Hubs.Events.on('pageChange', reposition);\n  Hubs.Events.on('resize', reposition);\n}\n"]}